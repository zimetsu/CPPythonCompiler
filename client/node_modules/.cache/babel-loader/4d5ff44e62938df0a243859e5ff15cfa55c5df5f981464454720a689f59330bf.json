{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project1/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Project1/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Project1/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import axios from'axios';import React,{useState,useEffect}from'react';import'./styles.css';import stubs from'./defaultStubs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),code=_useState2[0],setCode=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),output=_useState4[0],setOutput=_useState4[1];var _useState5=useState(\"cpp\"),_useState6=_slicedToArray(_useState5,2),language=_useState6[0],setLanguage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),status=_useState8[0],setStatus=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),jobId=_useState10[0],setJobId=_useState10[1];useEffect(function(){setCode(stubs[language]);},[language]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var payload,_yield$axios$post,data,intervalId,_error$response$data,_error$response$data$,errMsg;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:payload={language:language,code:code};_context2.prev=1;setJobId(\"\");setStatus(\"\");setOutput(\"\");_context2.next=7;return axios.post(\"http://localhost:5000/run\",payload);case 7:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setJobId(data.jobId);intervalId=setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,dataRes,success,job,error,jobStatus,jobOutput;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:5000/status\",{params:{id:data.jobId}});case 3:_yield$axios$get=_context.sent;dataRes=_yield$axios$get.data;success=dataRes.success,job=dataRes.job,error=dataRes.error;if(!success){_context.next=15;break;}jobStatus=job.status,jobOutput=job.output;setStatus(jobStatus);if(!(jobStatus===\"pending\")){_context.next=11;break;}return _context.abrupt(\"return\");case 11:setOutput(jobOutput);clearInterval(intervalId);_context.next=19;break;case 15:setStatus(\"Error: Please retry\");console.error(error);clearInterval(intervalId);setOutput((error===null||error===void 0?void 0:error.stderr)||\"An unknown error occurred.\");case 19:_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 24:case\"end\":return _context.stop();}},_callee,null,[[0,21]]);})),1000);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);if(_context2.t0.response){errMsg=((_error$response$data=_context2.t0.response.data)===null||_error$response$data===void 0?void 0:(_error$response$data$=_error$response$data.err)===null||_error$response$data$===void 0?void 0:_error$response$data$.stderr)||\"Unknown error occurred.\";setOutput(errMsg);}else{setOutput(\"Error connecting to server!\");}case 16:case\"end\":return _context2.stop();}},_callee2,null,[[1,13]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:\"Online Code Compiler\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Language: \"}),/*#__PURE__*/_jsxs(\"select\",{value:language,onChange:function onChange(e){var response=window.confirm(\"WARNING: Switching the language will remove your data\");if(response){setLanguage(e.target.value);}},children:[/*#__PURE__*/_jsx(\"option\",{value:\"cpp\",children:\"C++\"}),/*#__PURE__*/_jsx(\"option\",{value:\"py\",children:\"Python\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",value:code,onChange:function onChange(e){return setCode(e.target.value);},rows:20,cols:75}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleSubmit,children:\"Submit\"}),/*#__PURE__*/_jsx(\"p\",{children:status}),/*#__PURE__*/_jsx(\"p\",{children:jobId&&'JobId: '+jobId}),/*#__PURE__*/_jsx(\"p\",{className:\"output\",children:output})]});}export default App;","map":{"version":3,"names":["axios","React","useState","useEffect","stubs","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","code","setCode","_useState3","_useState4","output","setOutput","_useState5","_useState6","language","setLanguage","_useState7","_useState8","status","setStatus","_useState9","_useState10","jobId","setJobId","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","payload","_yield$axios$post","data","intervalId","_error$response$data","_error$response$data$","errMsg","wrap","_callee2$","_context2","prev","next","post","sent","setInterval","_callee","_yield$axios$get","dataRes","success","job","error","jobStatus","jobOutput","_callee$","_context","get","params","id","abrupt","clearInterval","console","stderr","t0","stop","response","err","apply","arguments","className","children","value","onChange","e","window","confirm","target","rows","cols","onClick"],"sources":["D:/Project1/client/src/App.js"],"sourcesContent":["import './App.css';\nimport axios from 'axios';\nimport React, { useState, useEffect} from 'react';\nimport './styles.css';\nimport stubs from './defaultStubs';\nfunction App() {\n  const [code, setCode] = useState(\"\");\n  const [output, setOutput] = useState(\"\");\n  const [language, setLanguage] = useState(\"cpp\");\n  const [status, setStatus] = useState(\"\");\n  const [jobId, setJobId] = useState(\"\");\n\n  useEffect(() => {\n    setCode(stubs[language])\n  }, [language]);\n\n  const handleSubmit = async () => {\n    const payload = {\n      language,\n      code,\n    };\n\n    try {\n      setJobId(\"\");\n      setStatus(\"\");\n      setOutput(\"\");\n      const { data } = await axios.post(\"http://localhost:5000/run\", payload);\n      setJobId(data.jobId);\n      let intervalId;\n\n      intervalId = setInterval(async () => {\n        try {\n          const { data: dataRes } = await axios.get(\n            \"http://localhost:5000/status\",\n            { params: { id: data.jobId } }\n          );\n\n          const { success, job, error } = dataRes;\n\n          if (success) {\n            const { status: jobStatus, output: jobOutput } = job;\n            setStatus(jobStatus);\n            if (jobStatus === \"pending\") return;\n            setOutput(jobOutput);\n            clearInterval(intervalId);\n          } else {\n            setStatus(\"Error: Please retry\");\n            console.error(error);\n            clearInterval(intervalId);\n            setOutput(error?.stderr || \"An unknown error occurred.\");\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }, 1000);\n    } catch (error) {\n      if (error.response) {\n        const errMsg = error.response.data?.err?.stderr || \"Unknown error occurred.\";\n        setOutput(errMsg);\n      } else {\n        setOutput(\"Error connecting to server!\");\n      }\n    }\n  };\n  return (\n    <div className=\"container\">\n      \n      <h1 className=\"heading\">Online Code Compiler</h1>\n      <div>\n        <label>Language: </label>\n        <select\n          value = {language}\n          onChange={(e) => {\n            let response = window.confirm(\n              \"WARNING: Switching the language will remove your data\"\n            )\n            if(response){\n              setLanguage(e.target.value);\n            }\n          }}\n        >\n          <option value = \"cpp\">C++</option>\n          <option value = \"py\">Python</option>\n        </select>\n      </div>\n      <br>\n      </br>\n      <textarea\n        className=\"textarea\"\n        value={code}\n        onChange={(e) => setCode(e.target.value)}\n        rows={20}\n        cols={75}\n      ></textarea>\n      <br />\n      <button className=\"button\" onClick={handleSubmit}>\n        Submit\n      </button>\n      <p>{status}</p>\n      <p>{jobId && 'JobId: ' + jobId}</p>\n      <p className=\"output\">{output}</p>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"wUAAA,MAAO,WAAW,CAClB,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACjD,MAAO,cAAc,CACrB,MAAO,CAAAC,KAAK,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACnC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,IAAAC,SAAA,CAAwBR,QAAQ,CAAC,EAAE,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAA4Bb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjCE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACxB,IAAAG,UAAA,CAAgCjB,QAAQ,CAAC,KAAK,CAAC,CAAAkB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAxCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAA4BrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAjCE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACxB,IAAAG,UAAA,CAA0BzB,QAAQ,CAAC,EAAE,CAAC,CAAA0B,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAA/BE,KAAK,CAAAD,WAAA,IAAEE,QAAQ,CAAAF,WAAA,IAEtBzB,SAAS,CAAC,UAAM,CACdW,OAAO,CAACV,KAAK,CAACiB,QAAQ,CAAC,CAAC,CAC1B,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,GAAM,CAAAU,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,SAAA,MAAAC,OAAA,CAAAC,iBAAA,CAAAC,IAAA,CAAAC,UAAA,CAAAC,oBAAA,CAAAC,qBAAA,CAAAC,MAAA,QAAAT,mBAAA,GAAAU,IAAA,UAAAC,UAAAC,SAAA,iBAAAA,SAAA,CAAAC,IAAA,CAAAD,SAAA,CAAAE,IAAA,SACbX,OAAO,CAAG,CACdhB,QAAQ,CAARA,QAAQ,CACRR,IAAI,CAAJA,IACF,CAAC,CAAAiC,SAAA,CAAAC,IAAA,GAGCjB,QAAQ,CAAC,EAAE,CAAC,CACZJ,SAAS,CAAC,EAAE,CAAC,CACbR,SAAS,CAAC,EAAE,CAAC,CAAC4B,SAAA,CAAAE,IAAA,SACS,CAAAhD,KAAK,CAACiD,IAAI,CAAC,2BAA2B,CAAEZ,OAAO,CAAC,QAAAC,iBAAA,CAAAQ,SAAA,CAAAI,IAAA,CAA/DX,IAAI,CAAAD,iBAAA,CAAJC,IAAI,CACZT,QAAQ,CAACS,IAAI,CAACV,KAAK,CAAC,CAGpBW,UAAU,CAAGW,WAAW,cAAAlB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAiB,QAAA,MAAAC,gBAAA,CAAAC,OAAA,CAAAC,OAAA,CAAAC,GAAA,CAAAC,KAAA,CAAAC,SAAA,CAAAC,SAAA,QAAAzB,mBAAA,GAAAU,IAAA,UAAAgB,SAAAC,QAAA,iBAAAA,QAAA,CAAAd,IAAA,CAAAc,QAAA,CAAAb,IAAA,SAAAa,QAAA,CAAAd,IAAA,GAAAc,QAAA,CAAAb,IAAA,SAEW,CAAAhD,KAAK,CAAC8D,GAAG,CACvC,8BAA8B,CAC9B,CAAEC,MAAM,CAAE,CAAEC,EAAE,CAAEzB,IAAI,CAACV,KAAM,CAAE,CAC/B,CAAC,QAAAwB,gBAAA,CAAAQ,QAAA,CAAAX,IAAA,CAHaI,OAAO,CAAAD,gBAAA,CAAbd,IAAI,CAKJgB,OAAO,CAAiBD,OAAO,CAA/BC,OAAO,CAAEC,GAAG,CAAYF,OAAO,CAAtBE,GAAG,CAAEC,KAAK,CAAKH,OAAO,CAAjBG,KAAK,KAEvBF,OAAO,EAAAM,QAAA,CAAAb,IAAA,WACOU,SAAS,CAAwBF,GAAG,CAA5C/B,MAAM,CAAqBkC,SAAS,CAAKH,GAAG,CAAzBvC,MAAM,CACjCS,SAAS,CAACgC,SAAS,CAAC,CAAC,KACjBA,SAAS,GAAK,SAAS,GAAAG,QAAA,CAAAb,IAAA,kBAAAa,QAAA,CAAAI,MAAA,mBAC3B/C,SAAS,CAACyC,SAAS,CAAC,CACpBO,aAAa,CAAC1B,UAAU,CAAC,CAACqB,QAAA,CAAAb,IAAA,kBAE1BtB,SAAS,CAAC,qBAAqB,CAAC,CAChCyC,OAAO,CAACV,KAAK,CAACA,KAAK,CAAC,CACpBS,aAAa,CAAC1B,UAAU,CAAC,CACzBtB,SAAS,CAAC,CAAAuC,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEW,MAAM,GAAI,4BAA4B,CAAC,CAAC,QAAAP,QAAA,CAAAb,IAAA,kBAAAa,QAAA,CAAAd,IAAA,IAAAc,QAAA,CAAAQ,EAAA,CAAAR,QAAA,aAG3DM,OAAO,CAACV,KAAK,CAAAI,QAAA,CAAAQ,EAAM,CAAC,CAAC,yBAAAR,QAAA,CAAAS,IAAA,MAAAlB,OAAA,iBAExB,GAAE,IAAI,CAAC,CAACN,SAAA,CAAAE,IAAA,kBAAAF,SAAA,CAAAC,IAAA,IAAAD,SAAA,CAAAuB,EAAA,CAAAvB,SAAA,aAET,GAAIA,SAAA,CAAAuB,EAAA,CAAME,QAAQ,CAAE,CACZ5B,MAAM,CAAG,EAAAF,oBAAA,CAAAK,SAAA,CAAAuB,EAAA,CAAME,QAAQ,CAAChC,IAAI,UAAAE,oBAAA,kBAAAC,qBAAA,CAAnBD,oBAAA,CAAqB+B,GAAG,UAAA9B,qBAAA,iBAAxBA,qBAAA,CAA0B0B,MAAM,GAAI,yBAAyB,CAC5ElD,SAAS,CAACyB,MAAM,CAAC,CACnB,CAAC,IAAM,CACLzB,SAAS,CAAC,6BAA6B,CAAC,CAC1C,CAAC,yBAAA4B,SAAA,CAAAwB,IAAA,MAAAlC,QAAA,iBAEJ,kBA/CK,CAAAL,YAAYA,CAAA,SAAAC,IAAA,CAAAyC,KAAA,MAAAC,SAAA,OA+CjB,CACD,mBACElE,KAAA,QAAKmE,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBtE,IAAA,OAAIqE,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,sBAAoB,CAAI,CAAC,cACjDpE,KAAA,QAAAoE,QAAA,eACEtE,IAAA,UAAAsE,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBpE,KAAA,WACEqE,KAAK,CAAIxD,QAAS,CAClByD,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAK,CACf,GAAI,CAAAR,QAAQ,CAAGS,MAAM,CAACC,OAAO,CAC3B,uDACF,CAAC,CACD,GAAGV,QAAQ,CAAC,CACVjD,WAAW,CAACyD,CAAC,CAACG,MAAM,CAACL,KAAK,CAAC,CAC7B,CACF,CAAE,CAAAD,QAAA,eAEFtE,IAAA,WAAQuE,KAAK,CAAG,KAAK,CAAAD,QAAA,CAAC,KAAG,CAAQ,CAAC,cAClCtE,IAAA,WAAQuE,KAAK,CAAG,IAAI,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC9B,CAAC,EACN,CAAC,cACNtE,IAAA,QACI,CAAC,cACLA,IAAA,aACEqE,SAAS,CAAC,UAAU,CACpBE,KAAK,CAAEhE,IAAK,CACZiE,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAAjE,OAAO,CAACiE,CAAC,CAACG,MAAM,CAACL,KAAK,CAAC,EAAC,CACzCM,IAAI,CAAE,EAAG,CACTC,IAAI,CAAE,EAAG,CACA,CAAC,cACZ9E,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQqE,SAAS,CAAC,QAAQ,CAACU,OAAO,CAAEtD,YAAa,CAAA6C,QAAA,CAAC,QAElD,CAAQ,CAAC,cACTtE,IAAA,MAAAsE,QAAA,CAAInD,MAAM,CAAI,CAAC,cACfnB,IAAA,MAAAsE,QAAA,CAAI/C,KAAK,EAAI,SAAS,CAAGA,KAAK,CAAI,CAAC,cACnCvB,IAAA,MAAGqE,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAE3D,MAAM,CAAI,CAAC,EAC/B,CAAC,CAEV,CAEA,cAAe,CAAAR,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}